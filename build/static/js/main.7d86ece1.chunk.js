(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t(14),r=t.n(c),a=(t(19),t(3)),l=t(4),u=t.n(l),i="http://localhost:3001/api/persons",s=function(){return u.a.get(i).then((function(e){return e.data}))},d=function(e){return u.a.post(i,e).then((function(e){return e.data}))},h=function(e){var n=u.a.delete("".concat(i,"/").concat(e));return console.log("Deleted"),n.then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),j="deletedStyle",m=function(e){var n=e.filter,t=e.handleFilterInputChange;return Object(f.jsxs)("div",{className:"formField",children:["filter shown with: ",Object(f.jsx)("input",{type:"text",onChange:t,value:n})]})},g=function(e){var n=e.persons,t=e.setPersons,o=e.setNotification,c=e.setNotificationStyle;return Object(f.jsx)("ul",{children:n.map((function(e,n){return Object(f.jsxs)("li",{children:[e.name," ",Object(f.jsx)("br",{}),e.number,Object(f.jsx)("br",{})," ",Object(f.jsx)("button",{onClick:function(){return n=e.id,r=e.name,void(window.confirm("Are you sure, you want to delete the contact")&&h(n).then((function(){s().then((function(e){c(j),t(e),o("Deleted ".concat(r)),setTimeout((function(){o(null),c(null)}),3e3)}))})).catch((function(e){console.log("In catch block"),o("There's some issue with ".concat(r)),c(j),setTimeout((function(){o(null),c(null)}),3e3)})));var n,r},children:"Delete"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{})]},n)}))})},p=function(e){var n=e.handleFormSubmit,t=e.handleNameInputChange,o=e.newName,c=e.handleNumberInputChange,r=e.newNumber;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{className:"formField",children:["Name: ",Object(f.jsx)("input",{onChange:t,value:o})]}),Object(f.jsxs)("div",{className:"formField",children:["Number: ",Object(f.jsx)("input",{onChange:c,value:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.message,t=e.style;return"deletedStyle"===t?Object(f.jsx)("div",{style:{backgroundColor:"lightgrey",color:"red",padding:".1rem",borderColor:"red",borderStyle:"solid",width:"60%",margin:"auto"},children:n}):"addedStyle"===t?Object(f.jsx)("div",{style:{backgroundColor:"lightseagreen",color:"darkgreen",padding:".1rem",borderColor:"darkgreen",borderStyle:"solid",width:"60%",margin:"auto"},children:n}):null},v=function(){console.log("In App() >> start");var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),l=Object(a.a)(r,2),u=l[0],i=l[1],h=Object(o.useState)(""),v=Object(a.a)(h,2),x=v[0],w=v[1],C=Object(o.useState)(""),y=Object(a.a)(C,2),S=y[0],N=y[1],k=Object(o.useState)(""),I=Object(a.a)(k,2),F=I[0],T=I[1],A=Object(o.useState)(""),D=Object(a.a)(A,2),P=D[0],E=D[1];Object(o.useEffect)((function(){console.log("In useEffect"),s().then((function(e){return c(e)}))}),[]),console.log("After useEffect");var B=-1,J=function(e,n){return console.log("person name",n.name),console.log("new name",u),console.log("new number",x),0===n.name.localeCompare(u)&&0===n.number.localeCompare(x)?(e=1,console.log("same names bro >>")):0===n.name.localeCompare(u)&&(e=-1,B=n.id),e};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(O,{message:F,style:P}),Object(f.jsx)(m,{filter:S,handleFilterInputChange:function(e){var n=e.target.value;if(""==n||"underfined"===n)console.log("val",n),N(n),s().then((function(e){return c(e)}));else{N(n);var o=t.filter((function(e){return console.log("filter",n),!!e.name.startsWith(n)}));c(o)}console.log("filt",o)}}),Object(f.jsx)("br",{}),Object(f.jsx)("h2",{children:"Add new"}),Object(f.jsx)(p,{handleFormSubmit:function(e){e.preventDefault(),console.log("Submit handled");var n={name:u,number:x},o=t.reduce(J,0);console.log("flagsum= ",o),0===o?d(n).then((function(e){E("addedStyle"),c(t.concat(e)),T("Added ".concat(u)),setTimeout((function(){T(null),E(null)}),3e3)})).catch((function(e){T("There's some issue with ".concat(n)),E(j),setTimeout((function(){T(null),E(null)}),3e3)})):-1===o?window.confirm("".concat(u," is already added to phonebook"))&&b(B,n).then((function(e){console.log("id of same person >> ",B),c(t.map((function(n){return n.id!=B?n:e})))})).catch((function(e){T("There's some issue with ".concat(n)),E(j),setTimeout((function(){T(null),E(null)}),3e3)})):window.alert("".concat(u," is already added to phonebook")),w(""),i("")},handleNameInputChange:function(e){console.log("Input Change handled- ",e.target.value),i(e.target.value)},newName:u,handleNumberInputChange:function(e){console.log("Input Change handled- ",e.target.value),w(e.target.value)},newNumber:x}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(g,{persons:t,setPersons:c,setNotification:T,setNotificationStyle:E})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),o(e),c(e),r(e),a(e)}))};r.a.render(Object(f.jsx)(v,{}),document.getElementById("root")),x()}},[[39,1,2]]]);
//# sourceMappingURL=main.7d86ece1.chunk.js.map